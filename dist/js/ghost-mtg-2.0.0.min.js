!function(e){"use strict";var a=/^(\d+)\s(.+)$/,n="//gatherer.wizards.com/Handlers/Image.ashx?type=card",i="//gatherer.wizards.com/pages/search/default.aspx";function t(e){var a="name="+encodeURIComponent('+["'+e+'"]');return'<a href="'+(i+"?"+a)+'" target="_blank">'+e+"</a>"}if(!e)throw"jQuery missing. Exiting.";var s=e("decklist"),c="",r="",d=[],l=[];if(s.find("p").each(function(a){var n=e(this).text();0===a?"none"!==n.toLowerCase()&&(c=n):1===a?"none"!==n.toLowerCase()&&(r=n):d.push(n)}),s.find("ul").each(function(){var a=e(this).html();a=(a=a.replace("<br>","")).replace(/(\r\n|\n|\r)/gm,""),l.push(a)}),d.length!==l.length)throw"Number of decklist headers differs from number of decklist sections.";if(4!==d.length)throw"Locked in to 4 sections right now.";var o=e('<p class="decklist__name">'+c+"</p>"),p=e('<p class="decklist__author">'+r+"</p>"),h=e("<header></header>");h.append(o),h.append(p);var m=e("<ul></ul>");m.append('<li class="decklist__section-header">'+d[0]+"</li>"),m.append(l[0]),m.append('<li class="decklist__section-header">'+d[1]+"</li>"),m.append(l[1]);var u=e('<section class="decklist__column"></section>');u.append(m);var f=e("<ul></ul>");f.append('<li class="decklist__section-header">'+d[2]+"</li>"),f.append(l[2]);var v=e('<ul class="decklist__sideboard"></ul>');v.append('<li class="decklist__section-header">'+d[3]+"</li>"),v.append(l[3]);var _=e('<section class="decklist__column"></section>');_.append(f),_.append(v);var g=e('<section class="decklist__image"></section>'),k=e("<main></main>");k.append(u),k.append(_),k.append('<div class="medium-view-cf"></div>'),k.append(g);var w=e('<figure class="decklist"></figure>');w.append(h),w.append(k),s.html(w);var C=!0;s.find("li").each(function(){var i=e(this).html(),s=a.exec(i);if(!s)return!0;var c=s[1],r=s[2],d=t(r);e(this).html(c+" "+d),e(this).attr("data-name",r),C&&(g.append('<img src="'+n+"&name="+encodeURIComponent(r)+'">'),C=!1)}),s.find("li").mouseover(function(){var a=e(this).attr("data-name"),i=n+"&name="+encodeURIComponent(a);e(".decklist__image img").attr("src",i)}),e("card").each(function(){var a=e(this),i=a.html();a.html(t(i));var s=n+"&name="+encodeURIComponent(i);a.append('<img src="'+s+'">')}),e("card").hover(function(){e(this).find("img").show()},function(){e(this).find("img").hide()})}(jQuery);