!function(e){"use strict";var a=/^(\d+)\s(.+)$/,n="//gatherer.wizards.com/Handlers/Image.ashx?type=card",i="//gatherer.wizards.com/pages/search/default.aspx";function s(e){var a="name="+encodeURIComponent('+["'+e+'"]');return'<a href="'+(i+"?"+a)+'" target="_blank">'+e+"</a>"}if(!e)throw"jQuery missing. Exiting.";var t=e("decklist"),c="",d="",r=[],l=[];if(t.find("p").each(function(a){var n=e(this).text();0===a?"none"!==n.toLowerCase()&&(c=n):1===a?"none"!==n.toLowerCase()&&(d=n):r.push(n)}),t.find("ul").each(function(){var a=e(this).html();a=(a=a.replace("<br>","")).replace(/(\r\n|\n|\r)/gm,""),l.push(a)}),r.length!==l.length)throw"Number of decklist headers differs from number of decklist sections.";if(4!==r.length)throw"Locked in to 4 sections right now.";var o=e('<p class="decklist__name">'+c+"</p>"),p=e('<p class="decklist__author">'+d+"</p>"),h=e("<header></header>");h.append(o),h.append(p);var m=e("<ul></ul>");m.append('<li class="decklist__section-header">'+r[0]+"</li>"),m.append(l[0]),m.append('<li class="decklist__section-header">'+r[1]+"</li>"),m.append(l[1]);var u=e('<section class="decklist__column"></section>');u.append(m);var f=e("<ul></ul>");f.append('<li class="decklist__section-header">'+r[2]+"</li>"),f.append(l[2]);var _=e('<ul class="decklist__sideboard"></ul>');_.append('<li class="decklist__section-header">'+r[3]+"</li>"),_.append(l[3]);var v=e('<section class="decklist__column"></section>');v.append(f),v.append(_);var g=e('<section class="decklist__image"></section>'),k=e("<main></main>");k.append(u),k.append(v),k.append('<div class="medium-view-cf"></div>'),k.append(g);var w=e('<figure class="decklist"></figure>');w.append(h),w.append(k),t.html(w);var C=!0;t.find("li").each(function(){var i=e(this),t=i.html(),c=a.exec(t);if(!c)return!0;var d=c[1],r=c[2],l=s(r);i.html(d+" "+l),i.addClass("decklist__card"),i.attr("data-name",r),C&&(g.append('<img src="'+n+"&name="+encodeURIComponent(r)+'">'),C=!1)}),t.find("li.decklist__card").mouseover(function(){var a=e(this).attr("data-name"),i=n+"&name="+encodeURIComponent(a);e(".decklist__image img").attr("src",i)}),e("card").each(function(){var a=e(this),i=a.html();a.html(s(i));var t=n+"&name="+encodeURIComponent(i);a.append('<img src="'+t+'">')}),e("card").hover(function(){e(this).find("img").show()},function(){e(this).find("img").hide()})}(jQuery);